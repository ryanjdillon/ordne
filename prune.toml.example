# Prune Classification Rules Example Configuration
#
# This file demonstrates how to configure automatic file classification rules.
# Copy this to ~/.config/prune/prune.toml and customize for your needs.
#
# Rules are evaluated by priority (highest first). The first matching rule wins.
# Each rule can specify:
# - type: pattern, extension, size, age, or duplicate
# - category: main category for the file
# - subcategory: optional subcategory
# - subcategory_from_exif: pattern with EXIF placeholders (for photos)
# - priority: critical, normal, low, or trash
# - rule_priority: numeric priority (default: 50, higher = evaluated first)

# ============================================================================
# TRASH - Files to delete (high priority)
# ============================================================================

[rules.node_modules]
type = "pattern"
patterns = ["**/node_modules/**"]
category = "trash"
priority = "trash"
rule_priority = 100

[rules.cache_dirs]
type = "pattern"
patterns = [
    "**/.cache/**",
    "**/.npm/**",
    "**/.cargo/registry/**",
    "**/.rustup/**",
    "**/target/debug/**"
]
category = "trash"
priority = "trash"
rule_priority = 100

[rules.tmp_files]
type = "pattern"
patterns = ["**/*.tmp", "**/*.temp", "**/*.bak", "**/*~"]
category = "trash"
priority = "trash"
rule_priority = 100

[rules.log_files]
type = "extension"
extensions = ["log"]
category = "trash"
priority = "trash"
rule_priority = 90

[rules.build_artifacts]
type = "pattern"
patterns = [
    "**/dist/**",
    "**/build/**",
    "**/__pycache__/**",
    "**/*.pyc",
    "**/*.o",
    "**/*.so"
]
category = "trash"
priority = "trash"
rule_priority = 90

# ============================================================================
# LARGE FILES - Flag for review
# ============================================================================

[rules.huge_files]
type = "size"
min_bytes = 1073741824
category = "large_files"
subcategory = "over_1gb"
priority = "low"
rule_priority = 85

[rules.large_files]
type = "size"
min_bytes = 104857600
max_bytes = 1073741824
category = "large_files"
subcategory = "100mb_to_1gb"
priority = "low"
rule_priority = 80

# ============================================================================
# GIT REPOSITORIES - Special handling
# ============================================================================

[rules.git_objects]
type = "pattern"
patterns = ["**/.git/objects/**"]
category = "git"
subcategory = "objects"
priority = "low"
rule_priority = 75

[rules.git_repos]
type = "pattern"
patterns = ["**/.git"]
category = "git"
subcategory = "repository"
priority = "normal"
rule_priority = 70

# ============================================================================
# PHOTOS - Organize by EXIF date
# ============================================================================

[rules.photos_with_exif]
type = "extension"
extensions = ["jpg", "jpeg", "heic", "heif"]
category = "photos"
subcategory_from_exif = "{exif_year}/{exif_month}"
priority = "normal"
rule_priority = 60

[rules.raw_photos]
type = "extension"
extensions = ["cr2", "cr3", "nef", "arw", "dng", "raw"]
category = "photos"
subcategory = "raw"
priority = "normal"
rule_priority = 60

[rules.png_images]
type = "extension"
extensions = ["png", "gif", "webp", "tiff", "tif"]
category = "images"
subcategory = "graphics"
priority = "normal"
rule_priority = 55

# ============================================================================
# VIDEOS - Organize by type
# ============================================================================

[rules.videos]
type = "extension"
extensions = ["mp4", "mov", "avi", "mkv", "m4v", "webm"]
category = "videos"
subcategory = "standard"
priority = "normal"
rule_priority = 55

[rules.raw_videos]
type = "extension"
extensions = ["mts", "m2ts", "ts"]
category = "videos"
subcategory = "raw"
priority = "normal"
rule_priority = 55

# ============================================================================
# DOCUMENTS
# ============================================================================

[rules.documents]
type = "extension"
extensions = ["pdf", "doc", "docx", "odt"]
category = "documents"
subcategory = "text"
priority = "normal"
rule_priority = 50

[rules.spreadsheets]
type = "extension"
extensions = ["xls", "xlsx", "ods", "csv"]
category = "documents"
subcategory = "spreadsheets"
priority = "normal"
rule_priority = 50

[rules.presentations]
type = "extension"
extensions = ["ppt", "pptx", "odp", "key"]
category = "documents"
subcategory = "presentations"
priority = "normal"
rule_priority = 50

# ============================================================================
# CODE - Development files
# ============================================================================

[rules.source_code]
type = "extension"
extensions = ["rs", "go", "py", "js", "ts", "java", "c", "cpp", "h", "hpp"]
category = "code"
subcategory = "source"
priority = "normal"
rule_priority = 50

[rules.config_files]
type = "extension"
extensions = ["toml", "yaml", "yml", "json", "xml", "ini", "conf"]
category = "code"
subcategory = "config"
priority = "normal"
rule_priority = 50

# ============================================================================
# AUDIO
# ============================================================================

[rules.audio_lossless]
type = "extension"
extensions = ["flac", "wav", "aiff", "ape", "alac"]
category = "audio"
subcategory = "lossless"
priority = "normal"
rule_priority = 50

[rules.audio_compressed]
type = "extension"
extensions = ["mp3", "m4a", "ogg", "opus", "aac"]
category = "audio"
subcategory = "compressed"
priority = "normal"
rule_priority = 50

# ============================================================================
# ARCHIVES
# ============================================================================

[rules.archives]
type = "extension"
extensions = ["zip", "tar", "gz", "bz2", "xz", "7z", "rar"]
category = "archives"
subcategory = "compressed"
priority = "low"
rule_priority = 50

[rules.disk_images]
type = "extension"
extensions = ["iso", "img", "dmg"]
category = "archives"
subcategory = "disk_images"
priority = "low"
rule_priority = 50

# ============================================================================
# DUPLICATES - Handle by age
# ============================================================================

[rules.duplicate_keep_oldest]
type = "duplicate"
keep_strategy = "keep_oldest"
category = "duplicates"
subcategory = "review"
priority = "trash"
rule_priority = 40

# ============================================================================
# OLD FILES - Archive candidates
# ============================================================================

[rules.old_files_1year]
type = "age"
older_than_days = 365
category = "old_files"
subcategory = "over_1year"
priority = "low"
rule_priority = 30

[rules.old_files_2years]
type = "age"
older_than_days = 730
category = "old_files"
subcategory = "over_2years"
priority = "low"
rule_priority = 35

# ============================================================================
# NOTES
# ============================================================================
#
# Rule priorities guide:
# - 100: Critical trash (node_modules, cache)
# - 80-90: Size-based and build artifacts
# - 70-75: Git repositories
# - 55-65: Media files (photos, videos, audio)
# - 50: Documents, code, archives
# - 30-40: Age-based and duplicates
#
# EXIF pattern substitution:
# - {exif_year}: Year from photo EXIF data
# - {exif_month}: Month (zero-padded)
# - {exif_day}: Day (zero-padded)
# - {exif_make}: Camera manufacturer
# - {exif_model}: Camera model
# - {filename}: Original filename
#
# Priority levels:
# - critical: Important files, keep safely
# - normal: Regular files
# - low: Less important, candidates for offloading
# - trash: Safe to delete (after review)
